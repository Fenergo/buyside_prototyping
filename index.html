<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Home Dashboard · KYC Orchestrator</title>
<style>
:root{
--sidebar-bg: #f7fafd;
--sidebar-icon: #4976a4;
--sidebar-text: #4976a4;
--sidebar-width: 80px;
--sidebar-font-size: 12px;
--sidebar-title-size: 13px;
--sidebar-tag-size: 10px;
--sidebar-icon-size: 28px;
--sidebar-active: #e3eefa;
--sidebar-width: 170px;
--sidebar-font-size: 11px;
--sidebar-title-size: 13px;
--sidebar-tag-size: 10px;
--sidebar-icon-size: 18px;
--page:#ffffff;
--text:#0f172a;
--muted:#475569;
--line:#e5e7eb;
--card:#ffffff;
--sidebar: rgba(33,207,178,0.20);
--btn: rgba(33,207,178,0.60);
--btn-border: rgba(33,207,178,0.60);
--btn-text:#0b1220;
--link:#0ea5e9;
--task:#a399ff;
--success:#059669;
--warn:#d97706;
--danger:#dc2626;
--info:#2563eb;
--progress:#21cfb2;
}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial; background: var(--page); color:var(--text); line-height:1.45;}
a{color:var(--link); text-decoration:none} a:hover{text-decoration:underline}

.app{display:grid; grid-template-columns: var(--sidebar-width) 1fr; min-height:100vh}
.sidebar {
background: var(--sidebar-bg);
border-right: 1px solid var(--line);
width: var(--sidebar-width);
min-width: var(--sidebar-width);
max-width: var(--sidebar-width);
display: flex;
flex-direction: column;
align-items: center;
justify-content: flex-start;
height: 100vh;
padding: 0;
}
.sidebar .brand {
display: flex;
flex-direction: column;
align-items: center;
margin: 24px 0 0 0;
}
.sidebar .logo {
width: 36px;
height: 36px;
border-radius: 12px;
background: radial-gradient(circle at 25% 20%, #4976a4 0%, #e3eefa 100%);
margin-bottom: 8px;
}
.sidebar .brand h1 {
font-size: 14px;
color: var(--sidebar-text);
margin: 0;
font-weight: 600;
letter-spacing: 0.2px;
}
.sidebar .nav {
display: flex;
flex-direction: column;
align-items: center;
gap: 28px;
margin-top: 24px;
}
.sidebar .nav a {
display: flex;
flex-direction: column;
align-items: center;
gap: 4px;
color: var(--sidebar-text);
text-decoration: none;
font-size: var(--sidebar-font-size);
padding: 0;
border-radius: 8px;
width: 100%;
transition: background 0.15s;
}
.sidebar .nav a.active, .sidebar .nav a:hover {
background: var(--sidebar-active);
}
.sidebar .nav .icon {
width: var(--sidebar-icon-size);
height: var(--sidebar-icon-size);
color: var(--sidebar-icon);
display: block;
}
.sidebar .nav .text {
font-size: var(--sidebar-font-size);
color: var(--sidebar-text);
text-align: center;
margin-top: 2px;
}
.sidebar .nav .tag {
display: none;
}
.sidebar .footer-note {
margin-top: 10px;
font-size: 10px;
color: var(--muted);
opacity: .85;
padding: 0 3px;
margin-bottom: 18px;
}
.header{display:flex; align-items:center; justify-content:space-between; padding:16px 22px; position:sticky; top:0; z-index:5; background:rgba(255,255,255,0.9); backdrop-filter: blur(6px); border-bottom: 1px solid var(--line);}
.search{display:flex; align-items:center; gap:8px; border:1px solid var(--line); background: var(--card); padding:10px 12px; border-radius:12px; width:52%;}
.search input{flex:1; background:transparent; border:none; outline:none; color:var(--text);}
.actions{display:flex; align-items:center; gap:10px; margin-left:auto;}
.btn{background: var(--btn); border:1px solid var(--btn-border); color:var(--btn-text); padding:10px 12px; border-radius:10px; cursor:pointer; transition: filter .15s ease, transform .02s ease;}
.btn:hover{filter:brightness(1.05)} .btn:active{transform:translateY(1px)} .btn.primary{background: var(--btn); border-color: var(--btn-border)} .btn.ghost{background:transparent; color: var(--btn-text); border-color: var(--btn-border)} .btn.small{padding:6px 10px; font-size:12px}
.kbd{font: 12px/1.6 ui-monospace, SFMono-Regular, Menlo, Consolas; padding:2px 6px; border-radius:6px; border:1px solid var(--line); color:var(--muted)}
.content{padding:14px 22px 40px}
.page-title{display:flex; align-items:baseline; justify-content:space-between; gap:12px; margin:12px 0 8px 0}
.page-title h2{margin:0; font-size:22px}
.page-title .sub{color:var(--muted)}
.cards{display:grid; grid-template-columns: repeat(6, minmax(0,1fr)); gap:14px; margin:14px 0 6px}
.card{background: var(--card); border:1px solid var(--line); border-radius:14px; padding:12px 14px; min-height:72px; box-shadow: 0 8px 28px rgba(2,6,23,.06);}
.card .label{color:var(--muted); font-size:12px} .card .value{font-size:22px; margin-top:2px} .card .trend{font-size:12px; color:#047857} .card .danger{color:var(--danger)}
.grid-2{display:grid; grid-template-columns: 2fr 1fr; gap:16px; margin-top:16px} .grid-3{display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; margin-top:16px}
.section{background: var(--card); border:1px solid var(--line); border-radius:14px; padding:16px} .section h3{margin:0 0 10px 0; font-size:16px}
.table{width:100%; border-collapse:separate; border-spacing:0 8px; font-size:14px}
.table th{color:var(--muted); text-align:left; font-weight:600; padding:8px 10px; border-bottom:1px solid var(--line)}
.table td{padding:10px; background:#ffffff; border:1px solid var(--line)}
.table tr td:first-child{border-top-left-radius:10px; border-bottom-left-radius:10px} .table tr td:last-child{border-top-right-radius:10px; border-bottom-right-radius:10px}
.badge{font-size:12px; padding:4px 8px; border-radius:999px; border:1px solid var(--line); background:#f8fafc; color:#0b1220}
.badge.ok{border-color:#065f46; background:#ecfdf5; color:#065f46} .badge.warn{border-color:#92400e; background:#fffbeb; color:#92400e}
.badge.danger{border-color:#7f1d1d; background:#fef2f2; color:#7f1d1d} .badge.info{border-color:#1e3a8a; background:#eff6ff; color:#1e3a8a} .badge.task{border-color:#6f63ff; background:#a399ff; color:#ffffff}
.pills{display:flex; gap:8px; flex-wrap:wrap}
.pill{padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:#f8fafc; cursor:pointer; font-size:12px; color:#0b1220}
.pill.active{background:rgba(33,207,178,0.18); border-color:rgba(33,207,178,0.28)}
.progress{width:100%; height:10px; border-radius:999px; background:#f1f5f9; border:1px solid var(--line); overflow:hidden}
.progress > span{display:block; height:100%; background:linear-gradient(90deg, var(--progress), rgba(33,207,178,0.85)); width:0%}
.stepper{display:flex; gap:10px; flex-wrap:wrap}
.step{display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; border:1px dashed #94a3b8; background:#f8fafc; color:#0b1220}
.step.current{border-style:solid; background:rgba(33,207,178,0.10)} .step .dot{width:10px; height:10px; border-radius:50%; background:#94a3b8; border:2px solid #cbd5e1}
.step.done .dot{background:#059669; border-color:#059669} .step.current .dot{background:var(--progress)}
.form-grid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px}
.label{font-size:12px; color:var(--muted); margin-bottom:6px}
.input, select, textarea{width:100%; background:#ffffff; color:var(--text); border:1px solid var(--line); border-radius:10px; padding:10px 12px}
.row{display:flex; gap:10px; align-items:center} hr.sep{border:0; border-top:1px solid var(--line); margin:14px 0}
.right{margin-left:auto} .muted{color:var(--muted)} .small{font-size:12px} .space-top{margin-top:10px} .center{display:flex; align-items:center; justify-content:center} .hidden{display:none!important}
/* Collapsible tracker */
.tracker .head{display:flex; align-items:center; gap:10px; cursor:pointer; user-select:none}
.chev{width:12px; height:12px; border-right:2px solid #334155; border-bottom:2px solid #334155; transform:rotate(45deg); transition: transform .15s ease;}
.tracker.collapsed .chev{transform:rotate(-135deg)}
.tracker .meta{display:flex; gap:12px; flex-wrap:wrap; margin-left:auto}
.stat{display:flex; gap:6px; align-items:center; font-size:12px; border:1px solid var(--line); border-radius:999px; padding:4px 8px; background:#f8fafc}
.stat b{font-weight:700}
.tracker-body{margin-top:10px}
/* Modal */
.modal{position:fixed; inset:0; background:rgba(0,0,0,.35); display:flex; align-items:center; justify-content:center; z-index:999}
.modal .box{background:#fff; border-radius:12px; border:1px solid var(--line); width:min(700px, 92vw); padding:16px; box-shadow:0 20px 60px rgba(0,0,0,.25)}
.modal .box h4{margin:0 0 8px 0}
.modal .box .actions{display:flex; gap:8px; justify-content:flex-end; margin-top:12px}
/* Floating Chat Button */
.floating-chat-btn{position:fixed; bottom:24px; right:24px; background:linear-gradient(135deg, var(--btn), rgba(33,207,178,0.85)); color:var(--btn-text); border:1px solid var(--btn-border); padding:14px 20px; border-radius:50px; font-size:15px; font-weight:600; cursor:pointer; box-shadow:0 8px 24px rgba(33,207,178,0.35); transition:all 0.3s ease; z-index:100; display:flex; align-items:center; gap:8px;}
.floating-chat-btn:hover{transform:translateY(-2px); box-shadow:0 12px 32px rgba(33,207,178,0.45); filter:brightness(1.08)}
.floating-chat-btn:active{transform:translateY(0)}
.floating-chat-btn svg{width:20px; height:20px}
/* Chat Modal */
.chat-modal .box{width:min(1000px, 95vw); max-height:90vh; padding:0; background:#0b1020; overflow:hidden}
/* Mini timeline */
.timeline{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:8px}
.tl-step{display:flex; flex-direction:column; align-items:center; gap:4px; min-width:90px}
@@ -344,6 +351,21 @@
</div>
</div>

<!-- Floating Chat Button -->
<button id="chatToOnboardBtn" class="floating-chat-btn" aria-label="Chat to Onboard">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
  </svg>
  Chat to Onboard
</button>

<!-- Chat Modal -->
<div id="chatModal" class="modal chat-modal hidden" role="dialog" aria-modal="true" aria-label="Chat to Onboard">
  <div class="box">
    <iframe id="chatIframe" src="fundbot_chat_prototype.html" sandbox="allow-scripts allow-same-origin" style="width:100%; height:85vh; border:none; border-radius:12px;"></iframe>
  </div>
</div>

</section>
</main>
</div>
@@ -509,28 +531,50 @@
       </div>
       ${i < steps.length - 1 ? '<div class="tl-line"></div>' : ''}
     `;
}).join('');
openModal(`Fund Launch ${l.id}`, `
     <div class="row small"><div style="width:140px">Name</div><div>${l.name}</div></div>
     <div class="row small"><div style="width:140px">Jurisdiction</div><div>${l.jurisdiction}</div></div>
     <div class="row small"><div style="width:140px">Vehicle</div><div>${l.vehicle}</div></div>
     <div class="row small"><div style="width:140px">SFDR</div><div>${l.sfdr||'—'}</div></div>
     <div class="row small"><div style="width:140px">Stage</div><div>${l.stage}</div></div>
     <div class="row small"><div style="width:140px">Pending reviews</div><div>${l.pendingReviews||0}</div></div>
     <div class="row small"><div style="width:140px">Started</div><div>${fmtTS(l.startDate)}</div></div>
     <div class="row small"><div style="width:140px">Launched</div><div>${fmtTS(l.launchedDate)}</div></div>
     <hr class="sep"/>
     <div class="small"><b>Timeline</b></div>
     <div class="timeline">${tlHtml}</div>
     <div class="actions"><a class="btn" href="fund-launch.html#${l.id}">Open in Fund Launch</a></div>
   `);
}));

// React to changes
window.addEventListener('storage', (e) => {
if (e.key === FL_KEY || e.key === DT_KEY) location.reload();
});

  // Chat to Onboard functionality
  const chatBtn = document.getElementById('chatToOnboardBtn');
  const chatModal = document.getElementById('chatModal');
  
  chatBtn.addEventListener('click', () => {
    chatModal.classList.remove('hidden');
  });
  
  // Close chat modal when clicking outside
  chatModal.addEventListener('click', (e) => {
    if (e.target === chatModal) {
      chatModal.classList.add('hidden');
    }
  });
  
  // Close chat modal with Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !chatModal.classList.contains('hidden')) {
      chatModal.classList.add('hidden');
    }
  });
})();
</script>
</body>
</html>
